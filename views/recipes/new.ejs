<%- include('../partials/header') %>

<h1>Create New Recipe</h1>

<form action="/recipes" method="post">
    <label for="recipeTitle">Recipe Title:</label>
    <input type="text" id="recipeTitle" name="recipeTitle" required>
    <br>

    <label for="recipeImage">Recipe Image URL:</label>
    <input type="text" id="recipeImage" name="recipeImage" required>
    <br>

    <label for="recipeDescription">Recipe Description:</label>
    <textarea id="recipeDescription" name="recipeDescription" required></textarea>
    <br>

    <h2>Ingredients</h2>
    <div id="ingredientsContainer">
        <div class="ingredient">
            <label for="amount">Amount:</label>
            <input type="number" id="amount" name="amount" min="1" max="1" required>

            <label for="measurement">Measurement:</label>
            <select id="measurement" name="measurement" required>
                <option value="g">g</option>
                <option value="kg">kg</option>
                <option value="tbsp">tbsp</option>
                <option value="tsp">tsp</option>
                <option value="cup">cup</option>
                <option value="piece">piece</option>
            </select>

            <label for="ingredientName">Ingredient Name:</label>
            <input type="text" id="ingredientName" name="ingredientName" required>

            <button type="button" onclick="removeIngredient(this)">Remove</button>
        </div>
    </div>
    <button type="button" onclick="addIngredient()">Add Ingredient</button>
    <br>

    <h2>Instructions</h2>
    <div id="instructionsContainer">
        <div class="instruction">
            <label for="stepNum">Step Number:</label>
            <input type="number" id="stepNum" name="stepNum" required>

            <label for="step">Instruction:</label>
            <textarea id="step" name="step" required></textarea>

            <button type="button" onclick="removeInstruction(this)">Remove</button>
        </div>
    </div>
    <button type="button" onclick="addInstruction()">Add Instruction</button>
    <br>

    <button type="submit">Create Recipe</button>
</form>

<script>
    function addIngredient() {
        const container = document.getElementById('ingredientsContainer');
        const newIngredient = container.children[0].cloneNode(true);
        container.appendChild(newIngredient);
    }

    function removeIngredient(button) {
        const container = document.getElementById('ingredientsContainer');
        if (container.children.length > 1) {
            container.removeChild(button.parentNode);
        }
    }

    function addInstruction() {
        const container = document.getElementById('instructionsContainer');
        const newInstruction = container.children[0].cloneNode(true);
        container.appendChild(newInstruction);
    }

    function removeInstruction(button) {
        const container = document.getElementById('instructionsContainer');
        if (container.children.length > 1) {
            container.removeChild(button.parentNode);
        }
    }
</script>

    <%- include('../partials/footer') %>